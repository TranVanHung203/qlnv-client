<div class="page config-notifications">
  <h2 class="page-title">‚öôÔ∏è C·∫•u h√¨nh th√¥ng b√°o</h2>

  <!-- Card hi·ªÉn th·ªã c·∫•u h√¨nh ƒëang s·ª≠ d·ª•ng -->
  <div class="card active-card" *ngIf="active">
    <h3>üìå ƒêang s·ª≠ d·ª•ng</h3>
    <div class="row"><strong>S·ªë ng√†y th√¥ng b√°o:</strong> {{ active.soNgayThongBao }}</div>
    <div class="row"><strong>Danh s√°ch nƒÉm th√¥ng b√°o:</strong> {{ active.danhSachNamThongBao }}</div>
    <div class="row"><strong>Id:</strong> {{ active.id }}</div>
    <div class="actions">
      <button class="btn" (click)="openList()">üìñ L·ªãch s·ª≠ / Ch·ªçn</button>
      <button class="btn primary" (click)="startEdit(active)">‚úèÔ∏è S·ª≠a</button>
    </div>
  </div>

  <!-- Khi ch∆∞a c√≥ c·∫•u h√¨nh -->
  <div *ngIf="active === null" class="card empty">
    <h3>Ch∆∞a c√≥ c·∫•u h√¨nh</h3>
    <p>Hi·ªán ch∆∞a c√≥ c·∫•u h√¨nh th√¥ng b√°o n√†o ƒëang ƒë∆∞·ª£c s·ª≠ d·ª•ng.</p>
    <div class="actions">
      <button class="btn success" (click)="startEdit()">‚ûï T·∫°o c·∫•u h√¨nh m·ªõi</button>
      <button class="btn" (click)="openList()">üìñ Xem l·ªãch s·ª≠</button>
    </div>
  </div>

  <!-- Editor -->
  <div class="editor card" *ngIf="editing">
    <h3>{{ editing.id ? ('‚úèÔ∏è S·ª≠a c·∫•u h√¨nh #' + editing.id) : '‚ûï T·∫°o c·∫•u h√¨nh m·ªõi' }}</h3>
    <div class="field">
      <label>S·ªë ng√†y th√¥ng b√°o</label>
      <input type="number" [(ngModel)]="editing.soNgayThongBao" />
      <div *ngIf="editorErrors['soNgayThongBao']" class="field-error">{{ editorErrors['soNgayThongBao'] }}</div>
    </div>
    <div class="field">
      <label>Danh s√°ch nƒÉm (CSV, v√≠ d·ª•: 1,2,3)</label>
      <input [(ngModel)]="editing.danhSachNamThongBao" />
      <div *ngIf="editorErrors['danhSachNamThongBao']" class="field-error">{{ editorErrors['danhSachNamThongBao'] }}</div>
    </div>
    <div class="editor-actions">
      <button class="btn success" (click)="save()">üíæ L∆∞u</button>
      <button class="btn" (click)="cancelEdit()">‚ùå H·ªßy</button>
      <button *ngIf="editing.id" class="btn danger" (click)="requestDelete(editing.id!)">üóëÔ∏è X√≥a</button>
    </div>
  </div>

  <!-- Modal: danh s√°ch -->
  <div class="modal-backdrop" *ngIf="listOpen">
    <div class="modal card">
      <h3>üìñ Danh s√°ch c·∫•u h√¨nh</h3>
      <table class="table small">
        <thead>
          <tr>
            <th>Id</th><th>S·ªë ng√†y</th><th>Danh s√°ch nƒÉm</th><th>K√≠ch ho·∫°t</th><th></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let c of all">
            <td>{{ c.id }}</td>
            <td>{{ c.soNgayThongBao }}</td>
            <td>{{ c.danhSachNamThongBao }}</td>
            <td>
              <span class="badge" [class.active]="c.isActive">{{ c.isActive ? 'ƒêang d√πng' : '' }}</span>
            </td>
            <td class="row-actions">
              <button class="btn small" (click)="select(c)">Ch·ªçn</button>
              <button class="btn small primary" (click)="startEdit(c)">S·ª≠a</button>
              <button class="btn small success" (click)="activate(c.id!)">K√≠ch ho·∫°t</button>
            </td>
          </tr>
        </tbody>
      </table>
      <div class="modal-actions">
        <button class="btn" (click)="listOpen = false">ƒê√≥ng</button>
      </div>
    </div>
  </div>

  <!-- Modal: x√°c nh·∫≠n x√≥a -->
  <div class="modal-backdrop" *ngIf="confirmDeleteId">
    <div class="modal card">
      <h3>‚ö†Ô∏è X√°c nh·∫≠n x√≥a</h3>
      <p>B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a c·∫•u h√¨nh #{{ confirmDeleteId }} ?<br />H√†nh ƒë·ªông <strong>kh√¥ng th·ªÉ ho√†n t√°c</strong>.</p>
      <div class="modal-actions">
        <button class="btn" (click)="cancelDelete()">H·ªßy</button>
        <button class="btn danger" (click)="confirmDelete()">X√≥a</button>
      </div>
    </div>
  </div>
</div>
